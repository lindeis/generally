<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_script_include">
    <sys_script_include action="INSERT_OR_UPDATE">
        <access>package_private</access>
        <active>true</active>
        <api_name>x_704397_generally.ResultUtils</api_name>
        <caller_access/>
        <client_callable>false</client_callable>
        <description/>
        <name>ResultUtils</name>
        <script><![CDATA[var ResultUtils = Class.create();
ResultUtils.prototype = {
    initialize: function() {},

    isSeasonCompleted: function() {
        var result = new GlideRecord('x_704397_generally_result');
        result.addQuery('year', gs.getProperty('x_704397_generally.actualYear'));
        result.addNullQuery('driver');
        result.query();
        if (result.next()) {
            return false;
        }
        return true;
    },

    getPointAllocation: function(series) {
        var property = 'x_704397_generally.' + series + 'PointAllocation';
        var pointAllocation = gs.getProperty(property).split(',');
        return pointAllocation;
    },

    getRoundCount: function(series) {
        var result = new GlideAggregate('x_704397_generally_result');
        result.setGroup(false);
        result.addQuery('year', gs.getProperty('x_704397_generally.actualYear'));
        result.addQuery('series', series);
        result.addAggregate('MAX', 'round');
        result.query();
        if (result.next()) {
            return result.getAggregate('MAX', 'round');
        }
    },

    sortStandings: function(standings) {
        standings.sort(function(a, b) {
            if (a.points === b.points) {
                if (a.finishes === b.finishes) {
                    return a.reversedPointsProgress > b.reversedPointsProgress ? -1 : 1;
                }
                return a.finishes > b.finishes ? -1 : 1;
            }
            return a.points > b.points ? -1 : 1;
        });
    },

    type: 'ResultUtils'
};]]></script>
        <sys_class_name>sys_script_include</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2021-11-23 14:28:32</sys_created_on>
        <sys_id>d024daf41bc00110b07fa9b4bd4bcb5d</sys_id>
        <sys_mod_count>2</sys_mod_count>
        <sys_name>ResultUtils</sys_name>
        <sys_package display_value="Generally" source="x_704397_generally">3d82299c1b333010b07fa9b4bd4bcb01</sys_package>
        <sys_policy>read</sys_policy>
        <sys_scope display_value="Generally">3d82299c1b333010b07fa9b4bd4bcb01</sys_scope>
        <sys_update_name>sys_script_include_d024daf41bc00110b07fa9b4bd4bcb5d</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-01-18 09:29:17</sys_updated_on>
    </sys_script_include>
</record_update>
